//ddl
CREATE TABLE employees (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    office INT
);

CREATE TABLE technique_types (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);

CREATE TABLE techniques (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    type_id INT REFERENCES technique_types(id) ON DELETE CASCADE
);

CREATE TABLE employee_equipments (
    id SERIAL PRIMARY KEY,
    employees_id INT REFERENCES employees(id) ON DELETE CASCADE, 
    technique_id INT REFERENCES techniques(id) ON DELETE CASCADE  
);

CREATE VIEW inventory_view AS
SELECT 
    e.name AS employee_name,                
    e.id AS employee_id,                          
    tt.name AS technique_type,             
    t.name AS technique_name,               
    t.id AS technique_tab_number           
FROM employee_equipments ee
JOIN employees e ON ee.employees_id = e.id  
JOIN techniques t ON ee.technique_id = t.id  
JOIN technique_types tt ON t.type_id = tt.id;

//dml

INSERT INTO technique_types (name) VALUES ('Системный блок');
INSERT INTO techniques (name, type_id) VALUES ('Intel', 1);
INSERT INTO employees (name, office) VALUES ('Иван Иванович Иванов', 101);
INSERT INTO employee_equipments (employees_id, technique_id) VALUES (1, 1);

INSERT INTO technique_types (name) VALUES ('монитор');
INSERT INTO techniques (name, type_id) VALUES ('Apple', 2);
INSERT INTO employees (name, office) VALUES ('Иван Иванович Иванов', 102);
INSERT INTO employee_equipments (employees_id, technique_id) VALUES (1, 2);

INSERT INTO technique_types (name) VALUES ('клавиатура');
INSERT INTO techniques (name, type_id) VALUES ('Microsoft', 3);
INSERT INTO employees (name, office) VALUES ('Сидр Сидорович Сидоров', 102);
INSERT INTO employee_equipments (employees_id, technique_id) VALUES (2, 3);

INSERT INTO technique_types (name) VALUES ('мышь');
INSERT INTO techniques (name, type_id) VALUES ('Mouse', 4);
INSERT INTO employees (name, office) VALUES ('Сидр Сидорович Сидоров', 103);
INSERT INTO employee_equipments (employees_id, technique_id) VALUES (2, 4);

INSERT INTO technique_types (name) VALUES ('принтер');
INSERT INTO techniques (name, type_id) VALUES ('Hp', 5);
INSERT INTO employees (name, office) VALUES ('Петр Петрович Петров', 103);
INSERT INTO employee_equipments (employees_id, technique_id) VALUES (3, 5);

INSERT INTO technique_types (name) VALUES ('Системный блок');
INSERT INTO techniques (name, type_id) VALUES ('Intel', 1);
INSERT INTO employees (name, office) VALUES ('Петр Петрович Петров', 104);
INSERT INTO employee_equipments (employees_id, technique_id) VALUES (3, 1);

INSERT INTO technique_types (name) VALUES ('монитор');
INSERT INTO techniques (name, type_id) VALUES ('Apple', 2);
INSERT INTO employees (name, office) VALUES ('Иуда Иудович Иудов', 104);
INSERT INTO employee_equipments (employees_id, technique_id) VALUES (4, 2);

INSERT INTO technique_types (name) VALUES ('клавиатура');
INSERT INTO techniques (name, type_id) VALUES ('Microsoft', 3);
INSERT INTO employees (name, office) VALUES ('Иуда Иудович Иудов', 105);
INSERT INTO employee_equipments (employees_id, technique_id) VALUES (4, 3);

INSERT INTO technique_types (name) VALUES ('мышь');
INSERT INTO techniques (name, type_id) VALUES ('Mouse', 4);
INSERT INTO employees (name, office) VALUES ('Семен Семенович Семенов', 105);
INSERT INTO employee_equipments (employees_id, technique_id) VALUES (5, 4);

INSERT INTO technique_types (name) VALUES ('принтер');
INSERT INTO techniques (name, type_id) VALUES ('Hp', 5);
INSERT INTO employees (name, office) VALUES ('Семен Семенович Семенов', 105);
INSERT INTO employee_equipments (employees_id, technique_id) VALUES (5, 5);